<script>
import { GlForm } from '@gitlab/ui';
import { s__ } from '~/locale';
import SectionDetails from './section_details.vue';
import SectionIdentifiers from './section_identifiers.vue';
import SectionName from './section_name.vue';
import SectionSolution from './section_solution.vue';

export default {
  name: 'NewVulnerabilityForm',
  components: {
    GlForm,
    SectionDetails,
    SectionIdentifiers,
    SectionName,
    SectionSolution,
  },
  data() {
    return {
      form: {
        vulnerabilityName: '',
        vulnerabilityDesc: '',
        severity: '',
        status: '',
        detectionMethod: '',
        identifiers: [],
      },
    };
  },
  methods: {
    updateFormValues(values) {
      this.form = { ...this.form, ...values };
    },
  },
  i18n: {
    title: s__('VulnerabilityManagement|Add vulnerability finding'),
    description: s__(
      'VulnerabilityManagement|Manually add a vulnerability entry into the vulnerability report.',
    ),
  },
};
</script>

<template>
  <div data-testid="new-vulnerability-form">
    <header class="gl-my-4 gl-border-b-gray-100 gl-border-b-solid gl-border-b-1">
      <h2 class="gl-mt-0 gl-mb-3">
        {{ $options.i18n.title }}
      </h2>
      <p data-testid="page-description">
        {{ $options.i18n.description }}
      </p>
    </header>
    <gl-form class="gl-p-4 gl-w-85p" @submit.prevent>
      <section-name @change="updateFormValues" />
      <section-details @change="updateFormValues" />
      <section-identifiers @change="updateFormValues" />
      <section-solution @change="updateFormValues" />
    </gl-form>
  </div>
</template>
